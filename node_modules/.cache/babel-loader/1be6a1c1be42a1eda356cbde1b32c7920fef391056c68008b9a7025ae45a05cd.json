{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{supabase}from\"./utils/supabaseClient\";import TimeTable from\"./components/TimeTable\";import ReserveForm from\"./components/ReserveForm\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[reservations,setReservations]=useState([]);const[now,setNow]=useState(new Date());const[currentDateOffset,setCurrentDateOffset]=useState(0);const today=new Date();const viewedDate=new Date(today);viewedDate.setDate(today.getDate()+currentDateOffset);const viewedDateString=viewedDate.toISOString().split(\"T\")[0];const fetchReservations=async()=>{const{data,error}=await supabase.from(\"reservations\").select(\"*\").order(\"inserted_at\",{ascending:true});if(!error)setReservations(data||[]);};useEffect(()=>{fetchReservations();},[]);useEffect(()=>{const channel=supabase.channel(\"public:reservations\").on(\"postgres_changes\",{event:\"*\",schema:\"public\",table:\"reservations\"},fetchReservations).subscribe();return()=>supabase.removeChannel(channel);},[]);useEffect(()=>{const timer=setInterval(()=>setNow(new Date()),1000);return()=>clearInterval(timer);},[]);const handleReserve=async newRes=>{const{error}=await supabase.from(\"reservations\").insert({room:newRes.room,start:newRes.start,end:newRes.end,user:newRes.user,date:viewedDateString});if(error){console.error(\"[Supabase Error] 예약 실패:\",error.message);alert(\"예약 중 오류가 발생했습니다: \"+error.message);}else{fetchReservations();}};const handleCancel=async id=>{const{error}=await supabase.from(\"reservations\").delete().eq(\"id\",id);if(!error)fetchReservations();};const handleDateChange=offset=>{setCurrentDateOffset(offset);};const filteredReservations=reservations.filter(r=>r.date===viewedDateString);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{maxWidth:\"480px\",margin:\"0 auto\",padding:\"1rem\",fontFamily:\"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif\"},children:[/*#__PURE__*/_jsxs(\"header\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:\"1rem\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontWeight:600,fontSize:\"1.25rem\",margin:0},children:\"\\uC2A4\\uD06C\\uB9B0\\uACE8\\uD504 \\uC608\\uC57D\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:\"0.9rem\",color:\"#555\",textAlign:\"right\"},children:[now.toLocaleDateString(\"ko-KR\"),/*#__PURE__*/_jsx(\"br\",{}),now.toLocaleTimeString(\"ko-KR\")]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",flexWrap:\"wrap\",gap:\"6px\",marginBottom:\"1rem\"},children:[...Array(7)].map((_,i)=>{const offset=i-3;const d=new Date(today);d.setDate(today.getDate()+offset);const label=d.toLocaleDateString(\"ko-KR\",{month:\"2-digit\",day:\"2-digit\",weekday:\"short\"});const isActive=offset===currentDateOffset;return/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDateChange(offset),style:{padding:\"6px 12px\",borderRadius:\"12px\",border:\"none\",fontSize:\"0.85rem\",backgroundColor:isActive?\"#007AFF\":\"#F0F0F5\",color:isActive?\"white\":\"#333\",fontWeight:isActive?600:400,boxShadow:isActive?\"0 1px 3px rgba(0,0,0,0.2)\":\"none\",transition:\"background-color 0.2s ease\"},children:label},offset);})}),/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",borderRadius:\"16px\",padding:\"20px\",boxShadow:\"0 2px 8px rgba(0,0,0,0.08)\",marginBottom:\"1.5rem\",fontSize:\"1.1rem\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"1.2rem\",fontWeight:600,marginBottom:\"12px\"},children:\"\\uC608\\uC57D \\uD604\\uD669\"}),/*#__PURE__*/_jsx(TimeTable,{reservations:filteredReservations,onCancel:handleCancel,currentTime:now,style:{borderTop:\"1px solid #eee\"}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",borderRadius:\"16px\",padding:\"20px\",boxShadow:\"0 2px 8px rgba(0,0,0,0.08)\",fontSize:\"1.1rem\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"1.2rem\",fontWeight:600,marginBottom:\"12px\"},children:\"\\uC0C8 \\uC608\\uC57D \\uCD94\\uAC00\"}),/*#__PURE__*/_jsx(ReserveForm,{reservations:filteredReservations,onReserve:handleReserve,currentTime:now,style:{fontSize:\"1.1rem\",padding:\"10px\",minHeight:\"50px\"}})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","supabase","TimeTable","ReserveForm","jsx","_jsx","jsxs","_jsxs","App","reservations","setReservations","now","setNow","Date","currentDateOffset","setCurrentDateOffset","today","viewedDate","setDate","getDate","viewedDateString","toISOString","split","fetchReservations","data","error","from","select","order","ascending","channel","on","event","schema","table","subscribe","removeChannel","timer","setInterval","clearInterval","handleReserve","newRes","insert","room","start","end","user","date","console","message","alert","handleCancel","id","delete","eq","handleDateChange","offset","filteredReservations","filter","r","className","style","maxWidth","margin","padding","fontFamily","children","display","justifyContent","alignItems","marginBottom","fontWeight","fontSize","color","textAlign","toLocaleDateString","toLocaleTimeString","flexWrap","gap","Array","map","_","i","d","label","month","day","weekday","isActive","onClick","borderRadius","border","backgroundColor","boxShadow","transition","background","onCancel","currentTime","borderTop","onReserve","minHeight"],"sources":["/Users/leeduhui/work/golf_reservation/golf_reservation_app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { supabase } from \"./utils/supabaseClient\";\nimport TimeTable from \"./components/TimeTable\";\nimport ReserveForm from \"./components/ReserveForm\";\nimport \"./App.css\";\n\nfunction App() {\n  const [reservations, setReservations] = useState([]);\n  const [now, setNow] = useState(new Date());\n  const [currentDateOffset, setCurrentDateOffset] = useState(0);\n\n  const today = new Date();\n  const viewedDate = new Date(today);\n  viewedDate.setDate(today.getDate() + currentDateOffset);\n  const viewedDateString = viewedDate.toISOString().split(\"T\")[0];\n\n  const fetchReservations = async () => {\n    const { data, error } = await supabase\n      .from(\"reservations\")\n      .select(\"*\")\n      .order(\"inserted_at\", { ascending: true });\n    if (!error) setReservations(data || []);\n  };\n\n  useEffect(() => { fetchReservations(); }, []);\n\n  useEffect(() => {\n    const channel = supabase\n      .channel(\"public:reservations\")\n      .on(\"postgres_changes\", { event: \"*\", schema: \"public\", table: \"reservations\" }, fetchReservations)\n      .subscribe();\n    return () => supabase.removeChannel(channel);\n  }, []);\n\n  useEffect(() => {\n    const timer = setInterval(() => setNow(new Date()), 1000);\n    return () => clearInterval(timer);\n  }, []);\n\n  const handleReserve = async newRes => {\n    const { error } = await supabase.from(\"reservations\").insert({\n      room: newRes.room,\n      start: newRes.start,\n      end: newRes.end,\n      user: newRes.user,\n      date: viewedDateString,\n    });\n    if (error) {\n      console.error(\"[Supabase Error] 예약 실패:\", error.message);\n      alert(\"예약 중 오류가 발생했습니다: \" + error.message);\n    } else {\n      fetchReservations();\n    }\n  };\n\n  const handleCancel = async id => {\n    const { error } = await supabase.from(\"reservations\").delete().eq(\"id\", id);\n    if (!error) fetchReservations();\n  };\n\n  const handleDateChange = offset => {\n    setCurrentDateOffset(offset);\n  };\n\n  const filteredReservations = reservations.filter(r => r.date === viewedDateString);\n\n  return (\n    <div className=\"container\" style={{ maxWidth: \"480px\", margin: \"0 auto\", padding: \"1rem\", fontFamily: \"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif\" }}>\n      <header style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: \"1rem\" }}>\n        <h2 style={{ fontWeight: 600, fontSize: \"1.25rem\", margin: 0 }}>스크린골프 예약</h2>\n        <div style={{ fontSize: \"0.9rem\", color: \"#555\", textAlign: \"right\" }}>\n          {now.toLocaleDateString(\"ko-KR\")}<br />{now.toLocaleTimeString(\"ko-KR\")}\n        </div>\n      </header>\n\n      <div style={{ display: \"flex\", justifyContent: \"center\", flexWrap: \"wrap\", gap: \"6px\", marginBottom: \"1rem\" }}>\n        {[...Array(7)].map((_, i) => {\n          const offset = i - 3;\n          const d = new Date(today);\n          d.setDate(today.getDate() + offset);\n          const label = d.toLocaleDateString(\"ko-KR\", { month: \"2-digit\", day: \"2-digit\", weekday: \"short\" });\n          const isActive = offset === currentDateOffset;\n          return (\n            <button\n              key={offset}\n              onClick={() => handleDateChange(offset)}\n              style={{\n                padding: \"6px 12px\",\n                borderRadius: \"12px\",\n                border: \"none\",\n                fontSize: \"0.85rem\",\n                backgroundColor: isActive ? \"#007AFF\" : \"#F0F0F5\",\n                color: isActive ? \"white\" : \"#333\",\n                fontWeight: isActive ? 600 : 400,\n                boxShadow: isActive ? \"0 1px 3px rgba(0,0,0,0.2)\" : \"none\",\n                transition: \"background-color 0.2s ease\"\n              }}\n            >\n              {label}\n            </button>\n          );\n        })}\n      </div>\n\n      <div style={{ background: \"white\", borderRadius: \"16px\", padding: \"20px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.08)\", marginBottom: \"1.5rem\", fontSize: \"1.1rem\" }}>\n        <h3 style={{ fontSize: \"1.2rem\", fontWeight: 600, marginBottom: \"12px\" }}>예약 현황</h3>\n        <TimeTable\n          reservations={filteredReservations}\n          onCancel={handleCancel}\n          currentTime={now}\n          style={{ borderTop: \"1px solid #eee\" }}\n        />\n      </div>\n\n      <div style={{ background: \"white\", borderRadius: \"16px\", padding: \"20px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.08)\", fontSize: \"1.1rem\" }}>\n        <h3 style={{ fontSize: \"1.2rem\", fontWeight: 600, marginBottom: \"12px\" }}>새 예약 추가</h3>\n        <ReserveForm\n          reservations={filteredReservations}\n          onReserve={handleReserve}\n          currentTime={now}\n          style={{ fontSize: \"1.1rem\", padding: \"10px\", minHeight: \"50px\" }}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}