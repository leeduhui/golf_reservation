{"ast":null,"code":"import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ReserveForm(_ref){let{reservations,onReserve,currentTime}=_ref;const[room,setRoom]=useState(rooms[0]);const[start,setStart]=useState(slots[0]);const[end,setEnd]=useState(slots[1]);const[user,setUser]=useState(\"\");// start 변경 시 end를 자동으로 다음 슬롯으로 설정\nuseEffect(()=>{const idx=slots.indexOf(start);if(idx<slots.length-1)setEnd(slots[idx+1]);},[start]);// 현재 시각 Date 객체\nconst now=currentTime;// 오늘 날짜 기준에 slotTime을 합쳐 Date 객체 생성\nconst getSlotDate=slot=>{const[h,m]=slot.split(\":\").map(Number);return new Date(now.getFullYear(),now.getMonth(),now.getDate(),h,m);};const handleSubmit=e=>{e.preventDefault();const sIdx=slots.indexOf(start);const eIdx=slots.indexOf(end);if(eIdx<=sIdx){alert(\"종료 시간은 시작 이후여야 합니다.\");return;}const overlap=reservations.some(r=>r.room===room&&slots.indexOf(r.start)<eIdx&&slots.indexOf(r.end)>sIdx);if(overlap){alert(\"이미 예약이 있습니다.\");return;}onReserve({id:\"\".concat(room,\"-\").concat(start,\"-\").concat(end),room,start,end,user});setUser(\"\");};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{display:\"flex\",flexWrap:\"wrap\",gap:\"8px\",marginTop:\"16px\"},children:[/*#__PURE__*/_jsx(\"select\",{value:room,onChange:e=>setRoom(e.target.value),children:rooms.map(r=>/*#__PURE__*/_jsx(\"option\",{value:r,children:r},r))}),/*#__PURE__*/_jsx(\"select\",{value:start,onChange:e=>setStart(e.target.value),children:slots.map(s=>{const slotDate=getSlotDate(s);const disabled=slotDate<=now;return/*#__PURE__*/_jsx(\"option\",{value:s,disabled:disabled,children:s},s);})}),/*#__PURE__*/_jsx(\"select\",{value:end,onChange:e=>setEnd(e.target.value),children:slots.map(s=>{const slotDate=getSlotDate(s);const startDate=getSlotDate(start);const disabled=slotDate<=now||slotDate<=startDate;return/*#__PURE__*/_jsx(\"option\",{value:s,disabled:disabled,children:s},s);})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uC774\\uB984\",value:user,onChange:e=>setUser(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\uC608\\uC57D\\uD558\\uAE30\"})]});}","map":{"version":3,"names":["ReserveForm","_ref","reservations","onReserve","currentTime","room","setRoom","useState","rooms","start","setStart","slots","end","setEnd","user","setUser","useEffect","idx","indexOf","length","now","getSlotDate","slot","h","m","split","map","Number","Date","getFullYear","getMonth","getDate","handleSubmit","e","preventDefault","sIdx","eIdx","alert","overlap","some","r","id","concat","_jsxs","onSubmit","style","display","flexWrap","gap","marginTop","children","_jsx","value","onChange","target","s","slotDate","disabled","startDate","type","placeholder","required"],"sources":["/Users/leeduhui/work/golf_reservation/golf_reservation_app/src/components/ReserveForm.js"],"sourcesContent":["export default function ReserveForm({ reservations, onReserve, currentTime }) {\n  const [room, setRoom] = useState(rooms[0]);\n  const [start, setStart] = useState(slots[0]);\n  const [end, setEnd] = useState(slots[1]);\n  const [user, setUser] = useState(\"\");\n\n  // start 변경 시 end를 자동으로 다음 슬롯으로 설정\n  useEffect(() => {\n    const idx = slots.indexOf(start);\n    if (idx < slots.length - 1) setEnd(slots[idx + 1]);\n  }, [start]);\n\n  // 현재 시각 Date 객체\n  const now = currentTime;\n  // 오늘 날짜 기준에 slotTime을 합쳐 Date 객체 생성\n  const getSlotDate = (slot) => {\n    const [h, m] = slot.split(\":\").map(Number);\n    return new Date(now.getFullYear(), now.getMonth(), now.getDate(), h, m);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const sIdx = slots.indexOf(start);\n    const eIdx = slots.indexOf(end);\n    if (eIdx <= sIdx) {\n      alert(\"종료 시간은 시작 이후여야 합니다.\");\n      return;\n    }\n    const overlap = reservations.some(r =>\n      r.room === room &&\n      slots.indexOf(r.start) < eIdx &&\n      slots.indexOf(r.end) > sIdx\n    );\n    if (overlap) {\n      alert(\"이미 예약이 있습니다.\");\n      return;\n    }\n    onReserve({ id: `${room}-${start}-${end}`, room, start, end, user });\n    setUser(\"\");\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"8px\", marginTop: \"16px\" }}>\n      {/* 방 선택 */}\n      <select value={room} onChange={e => setRoom(e.target.value)}>\n        {rooms.map(r => (\n          <option key={r} value={r}>{r}</option>\n        ))}\n      </select>\n\n      {/* 시작시간: 기준 시간 이전 disabled */}\n      <select value={start} onChange={e => setStart(e.target.value)}>\n        {slots.map(s => {\n          const slotDate = getSlotDate(s);\n          const disabled = slotDate <= now;\n          return (\n            <option key={s} value={s} disabled={disabled}>\n              {s}\n            </option>\n          );\n        })}\n      </select>\n\n      {/* 종료시간: 시작 이후이면서 기준 시간 이후인 슬롯만 */}\n      <select value={end} onChange={e => setEnd(e.target.value)}>\n        {slots.map(s => {\n          const slotDate = getSlotDate(s);\n          const startDate = getSlotDate(start);\n          const disabled = slotDate <= now || slotDate <= startDate;\n          return (\n            <option key={s} value={s} disabled={disabled}>\n              {s}\n            </option>\n          );\n        })}\n      </select>\n\n      {/* 사용자명 입력 및 예약 */}\n      <input\n        type=\"text\"\n        placeholder=\"이름\"\n        value={user}\n        onChange={e => setUser(e.target.value)}\n        required\n      />\n      <button type=\"submit\">예약하기</button>\n    </form>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}