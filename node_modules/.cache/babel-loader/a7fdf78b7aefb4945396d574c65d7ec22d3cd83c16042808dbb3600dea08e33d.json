{"ast":null,"code":"/* src/components/ReserveForm.js */import React,{useState,useEffect}from\"react\";import{rooms,slots}from\"../utils/data\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ReserveForm(_ref){let{reservations,onReserve,currentTime}=_ref;const[room,setRoom]=useState(rooms[0]);const[start,setStart]=useState(slots[0]);const[end,setEnd]=useState(slots[1]);const[user,setUser]=useState(\"\");useEffect(()=>{const idx=slots.indexOf(start);if(idx<slots.length-1)setEnd(slots[idx+1]);},[start]);const nowMinutes=currentTime.getHours()*60+currentTime.getMinutes();const handleSubmit=e=>{e.preventDefault();const sIdx=slots.indexOf(start);const eIdx=slots.indexOf(end);if(eIdx<=sIdx){alert(\"종료 시간은 시작 이후여야 합니다.\");return;}const overlap=reservations.some(r=>r.room===room&&slots.indexOf(r.start)<eIdx&&slots.indexOf(r.end)>sIdx);if(overlap){alert(\"이미 예약이 있습니다.\");return;}onReserve({id:\"\".concat(room,\"-\").concat(start,\"-\").concat(end),room,start,end,user});setUser(\"\");};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{display:\"flex\",flexWrap:\"wrap\",gap:\"8px\",marginTop:\"16px\"},children:[/*#__PURE__*/_jsx(\"select\",{value:room,onChange:e=>setRoom(e.target.value),children:rooms.map(r=>/*#__PURE__*/_jsx(\"option\",{value:r,children:r},r))}),/*#__PURE__*/_jsx(\"select\",{value:start,onChange:e=>setStart(e.target.value),children:slots.map(s=>{const[h,m]=s.split(\":\").map(Number);const slotMinutes=h*60+m;return/*#__PURE__*/_jsx(\"option\",{value:s,disabled:slotMinutes<=nowMinutes,children:s},s);})}),/*#__PURE__*/_jsx(\"select\",{value:end,onChange:e=>setEnd(e.target.value),children:slots.map(s=>{const[h,m]=s.split(\":\").map(Number);const slotMinutes=h*60+m;const startMinutes=slots.indexOf(start)*30+5*60;return/*#__PURE__*/_jsx(\"option\",{value:s,disabled:slotMinutes<=nowMinutes||slotMinutes<=slots.indexOf(start)*30+5*60,children:s},s);})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uC774\\uB984\",value:user,onChange:e=>setUser(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\uC608\\uC57D\\uD558\\uAE30\"})]});}","map":{"version":3,"names":["React","useState","useEffect","rooms","slots","jsx","_jsx","jsxs","_jsxs","ReserveForm","_ref","reservations","onReserve","currentTime","room","setRoom","start","setStart","end","setEnd","user","setUser","idx","indexOf","length","nowMinutes","getHours","getMinutes","handleSubmit","e","preventDefault","sIdx","eIdx","alert","overlap","some","r","id","concat","onSubmit","style","display","flexWrap","gap","marginTop","children","value","onChange","target","map","s","h","m","split","Number","slotMinutes","disabled","startMinutes","type","placeholder","required"],"sources":["/Users/leeduhui/work/golf_reservation/golf_reservation_app/src/components/ReserveForm.js"],"sourcesContent":["/* src/components/ReserveForm.js */\nimport React, { useState, useEffect } from \"react\";\nimport { rooms, slots } from \"../utils/data\";\n\nexport default function ReserveForm({ reservations, onReserve, currentTime }) {\n  const [room, setRoom] = useState(rooms[0]);\n  const [start, setStart] = useState(slots[0]);\n  const [end, setEnd] = useState(slots[1]);\n  const [user, setUser] = useState(\"\");\n\n  useEffect(() => {\n    const idx = slots.indexOf(start);\n    if (idx < slots.length - 1) setEnd(slots[idx + 1]);\n  }, [start]);\n\n  const nowMinutes = currentTime.getHours() * 60 + currentTime.getMinutes();\n  const handleSubmit = e => {\n    e.preventDefault();\n    const sIdx = slots.indexOf(start);\n    const eIdx = slots.indexOf(end);\n    if (eIdx <= sIdx) {\n      alert(\"종료 시간은 시작 이후여야 합니다.\");\n      return;\n    }\n    const overlap = reservations.some(r =>\n      r.room === room &&\n      slots.indexOf(r.start) < eIdx &&\n      slots.indexOf(r.end) > sIdx\n    );\n    if (overlap) {\n      alert(\"이미 예약이 있습니다.\");\n      return;\n    }\n    onReserve({ id: `${room}-${start}-${end}`, room, start, end, user });\n    setUser(\"\");\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"8px\", marginTop: \"16px\" }}>\n      <select value={room} onChange={e => setRoom(e.target.value)}>\n        {rooms.map(r => (\n          <option key={r} value={r}>{r}</option>\n        ))}\n      </select>\n      <select value={start} onChange={e => setStart(e.target.value)}>\n        {slots.map(s => {\n          const [h, m] = s.split(\":\").map(Number);\n          const slotMinutes = h * 60 + m;\n          return (\n            <option\n              key={s}\n              value={s}\n              disabled={slotMinutes <= nowMinutes}\n            >\n              {s}\n            </option>\n          );\n        })}\n      </select>\n      <select value={end} onChange={e => setEnd(e.target.value)}>\n        {slots.map(s => {\n          const [h, m] = s.split(\":\").map(Number);\n          const slotMinutes = h * 60 + m;\n          const startMinutes = slots.indexOf(start) * 30 + 5 * 60;\n          return (\n            <option\n              key={s}\n              value={s}\n              disabled={\n                slotMinutes <= nowMinutes ||\n                slotMinutes <= (slots.indexOf(start) * 30 + 5 * 60)\n              }\n            >\n              {s}\n            </option>\n          );\n        })}\n      </select>\n      <input\n        type=\"text\"\n        placeholder=\"이름\"\n        value={user}\n        onChange={e => setUser(e.target.value)}\n        required\n      />\n      <button type=\"submit\">예약하기</button>\n    </form>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}