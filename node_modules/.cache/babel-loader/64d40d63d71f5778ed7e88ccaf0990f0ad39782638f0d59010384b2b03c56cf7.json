{"ast":null,"code":"/* src/ReserveForm.js */import React,{useState,useEffect}from\"react\";import{rooms,slots}from\"../utils/data\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ReserveForm(_ref){let{reservations,onReserve,currentTime}=_ref;const[room,setRoom]=useState(\"1\");const[start,setStart]=useState(\"\");const[end,setEnd]=useState(\"\");const[user,setUser]=useState(\"\");const nowMinutes=currentTime.getHours()*60+currentTime.getMinutes();let boundaryMinutes;const windowStart=5*60;const windowEnd=24*60;if(nowMinutes<windowStart){boundaryMinutes=windowStart;}else if(nowMinutes>=windowEnd){boundaryMinutes=Infinity;}else{boundaryMinutes=Math.ceil(nowMinutes/30)*30;}// 초기 값 설정: start는 boundaryMinutes 이후 첫 슬롯, end는 그 다음 슬롯\nuseEffect(()=>{const available=slots.filter(s=>{const[h,m]=s.split(\":\").map(Number);return h*60+m>=boundaryMinutes;});if(available.length>=2){setStart(available[0]);setEnd(available[1]);}},[boundaryMinutes]);const handleSubmit=e=>{e.preventDefault();const sIdx=slots.indexOf(start);const eIdx=slots.indexOf(end);if(eIdx<=sIdx){alert(\"종료 시간은 시작 이후여야 합니다.\");return;}const overlap=reservations.some(r=>r.room===room&&slots.indexOf(r.start)<eIdx&&slots.indexOf(r.end)>sIdx);if(overlap){alert(\"이미 예약이 있습니다.\");return;}onReserve({id:\"\".concat(room,\"-\").concat(start,\"-\").concat(end),room,start,end,user});setUser(\"\");};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{display:\"flex\",flexDirection:\"column\",gap:\"12px\",marginTop:\"16px\"},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:500,fontSize:\"1rem\"},children:[\"\\uBC29 \\uBC88\\uD638\",/*#__PURE__*/_jsx(\"select\",{value:room,onChange:e=>setRoom(e.target.value),style:{fontSize:\"1.1rem\",padding:\"10px\",minHeight:\"44px\",width:\"100%\"},children:rooms.map(r=>/*#__PURE__*/_jsx(\"option\",{value:r,children:r},r))})]}),/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:500,fontSize:\"1rem\"},children:[\"\\uC2DC\\uC791 \\uC2DC\\uAC04\",/*#__PURE__*/_jsx(\"select\",{value:start,onChange:e=>setStart(e.target.value),style:{fontSize:\"1.1rem\",padding:\"10px\",minHeight:\"44px\",width:\"100%\"},children:slots.map(s=>{const[h,m]=s.split(\":\").map(Number);const slotMinutes=h*60+m;const disabled=slotMinutes<boundaryMinutes;return/*#__PURE__*/_jsx(\"option\",{value:s,disabled:disabled,children:s},s);})})]}),/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:500,fontSize:\"1rem\"},children:[\"\\uC885\\uB8CC \\uC2DC\\uAC04\",/*#__PURE__*/_jsx(\"select\",{value:end,onChange:e=>setEnd(e.target.value),style:{fontSize:\"1.1rem\",padding:\"10px\",minHeight:\"44px\",width:\"100%\"},children:slots.map(s=>{const[h,m]=s.split(\":\").map(Number);const slotMinutes=h*60+m;const startMinutes=start?parseInt(start.split(\":\")[0],10)*60+parseInt(start.split(\":\")[1],10):0;const disabled=slotMinutes<boundaryMinutes||slotMinutes<=startMinutes;return/*#__PURE__*/_jsx(\"option\",{value:s,disabled:disabled,children:s},s);})})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uC774\\uB984\",value:user,onChange:e=>setUser(e.target.value),required:true,style:{fontSize:\"1.1rem\",padding:\"10px\",minHeight:\"44px\",width:\"100%\"}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{backgroundColor:\"#007AFF\",color:\"white\",border:\"none\",borderRadius:\"8px\",padding:\"12px\",fontSize:\"1.1rem\",fontWeight:600},children:\"\\uC608\\uC57D\\uD558\\uAE30\"})]});}export default ReserveForm;","map":{"version":3,"names":["React","useState","useEffect","rooms","slots","jsx","_jsx","jsxs","_jsxs","ReserveForm","_ref","reservations","onReserve","currentTime","room","setRoom","start","setStart","end","setEnd","user","setUser","nowMinutes","getHours","getMinutes","boundaryMinutes","windowStart","windowEnd","Infinity","Math","ceil","available","filter","s","h","m","split","map","Number","length","handleSubmit","e","preventDefault","sIdx","indexOf","eIdx","alert","overlap","some","r","id","concat","onSubmit","style","display","flexDirection","gap","marginTop","children","fontWeight","fontSize","value","onChange","target","padding","minHeight","width","slotMinutes","disabled","startMinutes","parseInt","type","placeholder","required","backgroundColor","color","border","borderRadius"],"sources":["/Users/leeduhui/work/golf_reservation/golf_reservation_app/src/components/ReserveForm.js"],"sourcesContent":["/* src/ReserveForm.js */\nimport React, { useState, useEffect } from \"react\";\nimport { rooms, slots } from \"../utils/data\";\n\nfunction ReserveForm({ reservations, onReserve, currentTime }) {\n  const [room, setRoom] = useState(\"1\");\n  const [start, setStart] = useState(\"\");\n  const [end, setEnd] = useState(\"\");\n  const [user, setUser] = useState(\"\");\n\n  const nowMinutes = currentTime.getHours() * 60 + currentTime.getMinutes();\n\n  let boundaryMinutes;\n  const windowStart = 5 * 60;\n  const windowEnd = 24 * 60;\n  if (nowMinutes < windowStart) {\n    boundaryMinutes = windowStart;\n  } else if (nowMinutes >= windowEnd) {\n    boundaryMinutes = Infinity;\n  } else {\n    boundaryMinutes = Math.ceil(nowMinutes / 30) * 30;\n  }\n\n  // 초기 값 설정: start는 boundaryMinutes 이후 첫 슬롯, end는 그 다음 슬롯\n  useEffect(() => {\n    const available = slots.filter(s => {\n      const [h, m] = s.split(\":\").map(Number);\n      return h * 60 + m >= boundaryMinutes;\n    });\n    if (available.length >= 2) {\n      setStart(available[0]);\n      setEnd(available[1]);\n    }\n  }, [boundaryMinutes]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const sIdx = slots.indexOf(start);\n    const eIdx = slots.indexOf(end);\n    if (eIdx <= sIdx) {\n      alert(\"종료 시간은 시작 이후여야 합니다.\");\n      return;\n    }\n    const overlap = reservations.some(r =>\n      r.room === room &&\n      slots.indexOf(r.start) < eIdx &&\n      slots.indexOf(r.end) > sIdx\n    );\n    if (overlap) {\n      alert(\"이미 예약이 있습니다.\");\n      return;\n    }\n    onReserve({ id: `${room}-${start}-${end}`, room, start, end, user });\n    setUser(\"\");\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ display: \"flex\", flexDirection: \"column\", gap: \"12px\", marginTop: \"16px\" }}>\n      <label style={{ fontWeight: 500, fontSize: \"1rem\" }}>\n        방 번호\n        <select value={room} onChange={e => setRoom(e.target.value)} style={{ fontSize: \"1.1rem\", padding: \"10px\", minHeight: \"44px\", width: \"100%\" }}>\n          {rooms.map(r => <option key={r} value={r}>{r}</option>)}\n        </select>\n      </label>\n\n      <label style={{ fontWeight: 500, fontSize: \"1rem\" }}>\n        시작 시간\n        <select value={start} onChange={e => setStart(e.target.value)} style={{ fontSize: \"1.1rem\", padding: \"10px\", minHeight: \"44px\", width: \"100%\" }}>\n          {slots.map(s => {\n            const [h, m] = s.split(\":\").map(Number);\n            const slotMinutes = h * 60 + m;\n            const disabled = slotMinutes < boundaryMinutes;\n            return <option key={s} value={s} disabled={disabled}>{s}</option>;\n          })}\n        </select>\n      </label>\n\n      <label style={{ fontWeight: 500, fontSize: \"1rem\" }}>\n        종료 시간\n        <select value={end} onChange={e => setEnd(e.target.value)} style={{ fontSize: \"1.1rem\", padding: \"10px\", minHeight: \"44px\", width: \"100%\" }}>\n          {slots.map(s => {\n            const [h, m] = s.split(\":\").map(Number);\n            const slotMinutes = h * 60 + m;\n            const startMinutes = start ? parseInt(start.split(\":\")[0], 10) * 60 + parseInt(start.split(\":\")[1], 10) : 0;\n            const disabled = slotMinutes < boundaryMinutes || slotMinutes <= startMinutes;\n            return <option key={s} value={s} disabled={disabled}>{s}</option>;\n          })}\n        </select>\n      </label>\n\n      <input\n        type=\"text\"\n        placeholder=\"이름\"\n        value={user}\n        onChange={e => setUser(e.target.value)}\n        required\n        style={{ fontSize: \"1.1rem\", padding: \"10px\", minHeight: \"44px\", width: \"100%\" }}\n      />\n      <button type=\"submit\" style={{ backgroundColor: \"#007AFF\", color: \"white\", border: \"none\", borderRadius: \"8px\", padding: \"12px\", fontSize: \"1.1rem\", fontWeight: 600 }}>예약하기</button>\n    </form>\n  );\n}\n\nexport default ReserveForm;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}