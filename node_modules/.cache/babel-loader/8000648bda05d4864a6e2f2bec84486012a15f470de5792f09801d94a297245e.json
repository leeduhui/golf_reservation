{"ast":null,"code":"import _objectSpread from\"/Users/leeduhui/work/golf_reservation/golf_reservation_app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/components/TimeTable.js\nimport React,{useState}from\"react\";import\"./TimeTable.css\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const hours=Array.from({length:39},(_,i)=>{const totalMin=300+i*30;const h=Math.floor(totalMin/60);const m=totalMin%60;return\"\".concat(String(h).padStart(2,\"0\"),\":\").concat(String(m).padStart(2,\"0\"));});function TimeTable(_ref){let{reservations,onCancel,currentTime,viewedDate}=_ref;const now=new Date(currentTime);const nowMinutes=now.getHours()*60+now.getMinutes();const isToday=viewedDate===now.toISOString().split(\"T\")[0];// 각 예약의 startIndex, endIndex 계산\nconst groups=reservations.map(r=>{const startIndex=hours.indexOf(r.start);const endIndex=hours.indexOf(r.end);// exclusive\nreturn _objectSpread(_objectSpread({},r),{},{startIndex,endIndex});});// 모달 상태\nconst[isModalOpen,setModalOpen]=useState(false);const[selectedRes,setSelectedRes]=useState(null);const[passwordInput,setPasswordInput]=useState(\"\");const[error,setError]=useState(\"\");const openCancelModal=r=>{setSelectedRes(r);setPasswordInput(\"\");setError(\"\");setIsModalOpen(true);};const closeModal=()=>setIsModalOpen(false);const confirmCancel=()=>{if(passwordInput===selectedRes.password){onCancel(selectedRes.id);closeModal();}else{setError(\"비밀번호가 일치하지 않습니다.\");}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"timetable\",children:hours.map((slot,idx)=>{// 이 슬롯에 해당하는 예약 그룹 찾기\nconst group=groups.find(g=>idx>=g.startIndex&&idx<g.endIndex);const isReserved=!!group;const isStart=isReserved&&idx===group.startIndex;const isEnd=isReserved&&idx===group.endIndex-1;// 과거 슬롯 여부\nconst[h,m]=slot.split(\":\").map(Number);const slotMin=h*60+m;const isPast=isToday&&slotMin<nowMinutes;// CSS 클래스 조합\nconst classNames=[\"time-slot\",isReserved&&\"reserved-slot\",isStart&&\"reserved-start\",isEnd&&\"reserved-end\",isPast&&\"past\"].filter(Boolean).join(\" \");return/*#__PURE__*/_jsxs(\"div\",{className:classNames,onClick:()=>isStart&&!isPast&&openCancelModal(group),children:[/*#__PURE__*/_jsx(\"div\",{className:\"slot-time\",children:slot}),/*#__PURE__*/_jsx(\"div\",{className:\"slot-info\",children:isReserved?isStart?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:group.user}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel\",onClick:e=>{e.stopPropagation();openCancelModal(group);},disabled:isPast,children:\"\\uCDE8\\uC18C\"})]}):null:/*#__PURE__*/_jsx(\"span\",{className:\"available\",children:isPast?\"지나감\":\"예약 가능\"})})]},slot);})}),isModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cancel-modal\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uC608\\uC57D \\uCDE8\\uC18C\"}),/*#__PURE__*/_jsxs(\"p\",{children:[selectedRes.user,\" \\uB2D8\\uC758 \\uC608\\uC57D\\uC744 \\uCDE8\\uC18C\\uD558\\uB824\\uBA74 \\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694.\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:passwordInput,onChange:e=>setPasswordInput(e.target.value),placeholder:\"4\\uC790\\uB9AC \\uBE44\\uBC00\\uBC88\\uD638\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:confirmCancel,children:\"\\uD655\\uC778\"}),/*#__PURE__*/_jsx(\"button\",{onClick:closeModal,children:\"\\uCDE8\\uC18C\"})]})]})})]});}export default TimeTable;","map":{"version":3,"names":["React","useState","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","hours","Array","from","length","_","i","totalMin","h","Math","floor","m","concat","String","padStart","TimeTable","_ref","reservations","onCancel","currentTime","viewedDate","now","Date","nowMinutes","getHours","getMinutes","isToday","toISOString","split","groups","map","r","startIndex","indexOf","start","endIndex","end","_objectSpread","isModalOpen","setModalOpen","selectedRes","setSelectedRes","passwordInput","setPasswordInput","error","setError","openCancelModal","setIsModalOpen","closeModal","confirmCancel","password","id","children","className","slot","idx","group","find","g","isReserved","isStart","isEnd","Number","slotMin","isPast","classNames","filter","Boolean","join","onClick","user","e","stopPropagation","disabled","type","value","onChange","target","placeholder"],"sources":["/Users/leeduhui/work/golf_reservation/golf_reservation_app/src/components/TimeTable.js"],"sourcesContent":["// src/components/TimeTable.js\nimport React, { useState } from \"react\";\nimport \"./TimeTable.css\";\n\nconst hours = Array.from({ length: 39 }, (_, i) => {\n  const totalMin = 300 + i * 30;\n  const h = Math.floor(totalMin / 60);\n  const m = totalMin % 60;\n  return `${String(h).padStart(2, \"0\")}:${String(m).padStart(2, \"0\")}`;\n});\n\nfunction TimeTable({ reservations, onCancel, currentTime, viewedDate }) {\n  const now = new Date(currentTime);\n  const nowMinutes = now.getHours() * 60 + now.getMinutes();\n  const isToday = viewedDate === now.toISOString().split(\"T\")[0];\n\n  // 각 예약의 startIndex, endIndex 계산\n  const groups = reservations.map(r => {\n    const startIndex = hours.indexOf(r.start);\n    const endIndex = hours.indexOf(r.end); // exclusive\n    return { ...r, startIndex, endIndex };\n  });\n\n  // 모달 상태\n  const [isModalOpen, setModalOpen] = useState(false);\n  const [selectedRes, setSelectedRes] = useState(null);\n  const [passwordInput, setPasswordInput] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const openCancelModal = r => {\n    setSelectedRes(r);\n    setPasswordInput(\"\");\n    setError(\"\");\n    setIsModalOpen(true);\n  };\n  const closeModal = () => setIsModalOpen(false);\n  const confirmCancel = () => {\n    if (passwordInput === selectedRes.password) {\n      onCancel(selectedRes.id);\n      closeModal();\n    } else {\n      setError(\"비밀번호가 일치하지 않습니다.\");\n    }\n  };\n\n  return (\n    <>\n      <div className=\"timetable\">\n        {hours.map((slot, idx) => {\n          // 이 슬롯에 해당하는 예약 그룹 찾기\n          const group = groups.find(\n            g => idx >= g.startIndex && idx < g.endIndex\n          );\n          const isReserved = !!group;\n          const isStart = isReserved && idx === group.startIndex;\n          const isEnd = isReserved && idx === group.endIndex - 1;\n\n          // 과거 슬롯 여부\n          const [h, m] = slot.split(\":\").map(Number);\n          const slotMin = h * 60 + m;\n          const isPast = isToday && slotMin < nowMinutes;\n\n          // CSS 클래스 조합\n          const classNames = [\n            \"time-slot\",\n            isReserved && \"reserved-slot\",\n            isStart && \"reserved-start\",\n            isEnd && \"reserved-end\",\n            isPast && \"past\"\n          ]\n            .filter(Boolean)\n            .join(\" \");\n\n          return (\n            <div\n              key={slot}\n              className={classNames}\n              onClick={() =>\n                isStart && !isPast && openCancelModal(group)\n              }\n            >\n              <div className=\"slot-time\">{slot}</div>\n              <div className=\"slot-info\">\n                {isReserved ? (\n                  isStart ? (\n                    <>\n                      <span>{group.user}</span>\n                      <button\n                        className=\"cancel\"\n                        onClick={e => {\n                          e.stopPropagation();\n                          openCancelModal(group);\n                        }}\n                        disabled={isPast}\n                      >\n                        취소\n                      </button>\n                    </>\n                  ) : null\n                ) : (\n                  <span className=\"available\">\n                    {isPast ? \"지나감\" : \"예약 가능\"}\n                  </span>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {isModalOpen && (\n        <div className=\"modal-backdrop\">\n          <div className=\"cancel-modal\">\n            <h3>예약 취소</h3>\n            <p>\n              {selectedRes.user} 님의 예약을 취소하려면 비밀번호를 입력하세요.\n            </p>\n            <input\n              type=\"password\"\n              value={passwordInput}\n              onChange={e => setPasswordInput(e.target.value)}\n              placeholder=\"4자리 비밀번호\"\n            />\n            {error && <div className=\"error\">{error}</div>}\n            <div className=\"modal-buttons\">\n              <button onClick={confirmCancel}>확인</button>\n              <button onClick={closeModal}>취소</button>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default TimeTable;\n"],"mappings":"+IAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzB,KAAM,CAAAC,KAAK,CAAGC,KAAK,CAACC,IAAI,CAAC,CAAEC,MAAM,CAAE,EAAG,CAAC,CAAE,CAACC,CAAC,CAAEC,CAAC,GAAK,CACjD,KAAM,CAAAC,QAAQ,CAAG,GAAG,CAAGD,CAAC,CAAG,EAAE,CAC7B,KAAM,CAAAE,CAAC,CAAGC,IAAI,CAACC,KAAK,CAACH,QAAQ,CAAG,EAAE,CAAC,CACnC,KAAM,CAAAI,CAAC,CAAGJ,QAAQ,CAAG,EAAE,CACvB,SAAAK,MAAA,CAAUC,MAAM,CAACL,CAAC,CAAC,CAACM,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,MAAAF,MAAA,CAAIC,MAAM,CAACF,CAAC,CAAC,CAACG,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,EACpE,CAAC,CAAC,CAEF,QAAS,CAAAC,SAASA,CAAAC,IAAA,CAAsD,IAArD,CAAEC,YAAY,CAAEC,QAAQ,CAAEC,WAAW,CAAEC,UAAW,CAAC,CAAAJ,IAAA,CACpE,KAAM,CAAAK,GAAG,CAAG,GAAI,CAAAC,IAAI,CAACH,WAAW,CAAC,CACjC,KAAM,CAAAI,UAAU,CAAGF,GAAG,CAACG,QAAQ,CAAC,CAAC,CAAG,EAAE,CAAGH,GAAG,CAACI,UAAU,CAAC,CAAC,CACzD,KAAM,CAAAC,OAAO,CAAGN,UAAU,GAAKC,GAAG,CAACM,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAE9D;AACA,KAAM,CAAAC,MAAM,CAAGZ,YAAY,CAACa,GAAG,CAACC,CAAC,EAAI,CACnC,KAAM,CAAAC,UAAU,CAAG/B,KAAK,CAACgC,OAAO,CAACF,CAAC,CAACG,KAAK,CAAC,CACzC,KAAM,CAAAC,QAAQ,CAAGlC,KAAK,CAACgC,OAAO,CAACF,CAAC,CAACK,GAAG,CAAC,CAAE;AACvC,OAAAC,aAAA,CAAAA,aAAA,IAAYN,CAAC,MAAEC,UAAU,CAAEG,QAAQ,GACrC,CAAC,CAAC,CAEF;AACA,KAAM,CAACG,WAAW,CAAEC,YAAY,CAAC,CAAG7C,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAAC8C,WAAW,CAAEC,cAAc,CAAC,CAAG/C,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACgD,aAAa,CAAEC,gBAAgB,CAAC,CAAGjD,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACkD,KAAK,CAAEC,QAAQ,CAAC,CAAGnD,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAAAoD,eAAe,CAAGf,CAAC,EAAI,CAC3BU,cAAc,CAACV,CAAC,CAAC,CACjBY,gBAAgB,CAAC,EAAE,CAAC,CACpBE,QAAQ,CAAC,EAAE,CAAC,CACZE,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CACD,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAMD,cAAc,CAAC,KAAK,CAAC,CAC9C,KAAM,CAAAE,aAAa,CAAGA,CAAA,GAAM,CAC1B,GAAIP,aAAa,GAAKF,WAAW,CAACU,QAAQ,CAAE,CAC1ChC,QAAQ,CAACsB,WAAW,CAACW,EAAE,CAAC,CACxBH,UAAU,CAAC,CAAC,CACd,CAAC,IAAM,CACLH,QAAQ,CAAC,kBAAkB,CAAC,CAC9B,CACF,CAAC,CAED,mBACE7C,KAAA,CAAAF,SAAA,EAAAsD,QAAA,eACExD,IAAA,QAAKyD,SAAS,CAAC,WAAW,CAAAD,QAAA,CACvBnD,KAAK,CAAC6B,GAAG,CAAC,CAACwB,IAAI,CAAEC,GAAG,GAAK,CACxB;AACA,KAAM,CAAAC,KAAK,CAAG3B,MAAM,CAAC4B,IAAI,CACvBC,CAAC,EAAIH,GAAG,EAAIG,CAAC,CAAC1B,UAAU,EAAIuB,GAAG,CAAGG,CAAC,CAACvB,QACtC,CAAC,CACD,KAAM,CAAAwB,UAAU,CAAG,CAAC,CAACH,KAAK,CAC1B,KAAM,CAAAI,OAAO,CAAGD,UAAU,EAAIJ,GAAG,GAAKC,KAAK,CAACxB,UAAU,CACtD,KAAM,CAAA6B,KAAK,CAAGF,UAAU,EAAIJ,GAAG,GAAKC,KAAK,CAACrB,QAAQ,CAAG,CAAC,CAEtD;AACA,KAAM,CAAC3B,CAAC,CAAEG,CAAC,CAAC,CAAG2C,IAAI,CAAC1B,KAAK,CAAC,GAAG,CAAC,CAACE,GAAG,CAACgC,MAAM,CAAC,CAC1C,KAAM,CAAAC,OAAO,CAAGvD,CAAC,CAAG,EAAE,CAAGG,CAAC,CAC1B,KAAM,CAAAqD,MAAM,CAAGtC,OAAO,EAAIqC,OAAO,CAAGxC,UAAU,CAE9C;AACA,KAAM,CAAA0C,UAAU,CAAG,CACjB,WAAW,CACXN,UAAU,EAAI,eAAe,CAC7BC,OAAO,EAAI,gBAAgB,CAC3BC,KAAK,EAAI,cAAc,CACvBG,MAAM,EAAI,MAAM,CACjB,CACEE,MAAM,CAACC,OAAO,CAAC,CACfC,IAAI,CAAC,GAAG,CAAC,CAEZ,mBACEpE,KAAA,QAEEqD,SAAS,CAAEY,UAAW,CACtBI,OAAO,CAAEA,CAAA,GACPT,OAAO,EAAI,CAACI,MAAM,EAAIlB,eAAe,CAACU,KAAK,CAC5C,CAAAJ,QAAA,eAEDxD,IAAA,QAAKyD,SAAS,CAAC,WAAW,CAAAD,QAAA,CAAEE,IAAI,CAAM,CAAC,cACvC1D,IAAA,QAAKyD,SAAS,CAAC,WAAW,CAAAD,QAAA,CACvBO,UAAU,CACTC,OAAO,cACL5D,KAAA,CAAAF,SAAA,EAAAsD,QAAA,eACExD,IAAA,SAAAwD,QAAA,CAAOI,KAAK,CAACc,IAAI,CAAO,CAAC,cACzB1E,IAAA,WACEyD,SAAS,CAAC,QAAQ,CAClBgB,OAAO,CAAEE,CAAC,EAAI,CACZA,CAAC,CAACC,eAAe,CAAC,CAAC,CACnB1B,eAAe,CAACU,KAAK,CAAC,CACxB,CAAE,CACFiB,QAAQ,CAAET,MAAO,CAAAZ,QAAA,CAClB,cAED,CAAQ,CAAC,EACT,CAAC,CACD,IAAI,cAERxD,IAAA,SAAMyD,SAAS,CAAC,WAAW,CAAAD,QAAA,CACxBY,MAAM,CAAG,KAAK,CAAG,OAAO,CACrB,CACP,CACE,CAAC,GA7BDV,IA8BF,CAAC,CAEV,CAAC,CAAC,CACC,CAAC,CAELhB,WAAW,eACV1C,IAAA,QAAKyD,SAAS,CAAC,gBAAgB,CAAAD,QAAA,cAC7BpD,KAAA,QAAKqD,SAAS,CAAC,cAAc,CAAAD,QAAA,eAC3BxD,IAAA,OAAAwD,QAAA,CAAI,2BAAK,CAAI,CAAC,cACdpD,KAAA,MAAAoD,QAAA,EACGZ,WAAW,CAAC8B,IAAI,CAAC,gIACpB,EAAG,CAAC,cACJ1E,IAAA,UACE8E,IAAI,CAAC,UAAU,CACfC,KAAK,CAAEjC,aAAc,CACrBkC,QAAQ,CAAEL,CAAC,EAAI5B,gBAAgB,CAAC4B,CAAC,CAACM,MAAM,CAACF,KAAK,CAAE,CAChDG,WAAW,CAAC,wCAAU,CACvB,CAAC,CACDlC,KAAK,eAAIhD,IAAA,QAAKyD,SAAS,CAAC,OAAO,CAAAD,QAAA,CAAER,KAAK,CAAM,CAAC,cAC9C5C,KAAA,QAAKqD,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC5BxD,IAAA,WAAQyE,OAAO,CAAEpB,aAAc,CAAAG,QAAA,CAAC,cAAE,CAAQ,CAAC,cAC3CxD,IAAA,WAAQyE,OAAO,CAAErB,UAAW,CAAAI,QAAA,CAAC,cAAE,CAAQ,CAAC,EACrC,CAAC,EACH,CAAC,CACH,CACN,EACD,CAAC,CAEP,CAEA,cAAe,CAAArC,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}